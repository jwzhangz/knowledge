基于磁盘的文件系统，使用面向块的介质。需要解决如下问题，如何将文件内容和结构信息存储在目录层次结构上。从文件系统角度看，底层设备无非是存储块组成的一个列表，文件系统相当于对该列表实施一个适当的组织方案。


文件描述符是在打开文件时由内核分配，只在一个进程内有效。

内核处理文件的关键是inode。每个文件和目录都有且只有一个inode，其中包含元数据(访问权限等)和指向文件数据的指针。

inode的成员分为两类：
描述文件状态的元数据。
保存实际文件内容的数据段。

内核查找 /usr/bin/emacs 的inode的过程。

查找起始 inode，表示根目录/，对系统来说必须是已知的。其数据段不包含普通数据，而是根目录下的各个目录项。这些目录项代表文件或其他目录。每一项由两个成员组成。inode编号和文件或目录名称。

系统中inode编号唯一。查找usr的inode。通过根目录的inode接着获取对应的数据段。找到目录名为usr的inode。重复这个过程。

#### 链接
两种类型：符号链接和硬链接。

###### 符号链接
又称软链接。是一个目录项，包含目标文件的文件名。目标文件删除时，软链接并不会被删除。符号链接也有一个inode。

###### 硬链接
硬链接建立后，无法区分哪个文件是原来的，哪个是后来建立的。inode中包含一个计数器，创建硬链接时，计数器加1.如果硬链接或原始文件被删除，计数器减1。如果计数器为0，则完全删除文件。

#### 编程接口
用户进程使用open和openat系统调用打开文件。内核向用户层返回一个非负整数。从3开始。0表示标准输入，1为标准输出，2为标准错误输出。

传统上文件描述符在内核中足以标识一个文件。由于多命名空间和容器的引入，多个文件的描述符可以具有相同值。数据结构struct file唯一表示一个文件。

 
谁来创建super block，什么时候创建？super block对应着一个挂载点。
 
文件系统装载由mount触发。

#### 阅读代码
[Linux中__init、__devinit等初始化宏](http://blog.csdn.net/yinwei520/article/details/6646933)
 
[Linux的 __setup解析 -- 命令行处理](http://blog.csdn.net/wh_19910525/article/details/42779943)


文件存储在硬盘中的状态。
